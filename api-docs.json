{"openapi":"3.0.1","info":{"title":"CoffeeShop API","description":"API документация для кофейни","contact":{"name":"ThreadQA Team","url":"https://github.com/penolegrus"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Local Server"}],"security":[{"Bearer Authentication":[]}],"paths":{"/api/users/{id}":{"get":{"tags":["user-controller"],"operationId":"getUserById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}}},"put":{"tags":["user-controller"],"operationId":"updateUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRequestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}}},"delete":{"tags":["user-controller"],"operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/orders/{id}":{"get":{"tags":["coffee-order-controller"],"operationId":"getOrderById_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CoffeeOrderResponse"}}}}}},"put":{"tags":["coffee-order-controller"],"operationId":"updateOrder","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CoffeeOrder"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CoffeeOrder"}}}}}},"delete":{"tags":["coffee-order-controller"],"operationId":"deleteOrder","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/orders/{id}/status":{"put":{"tags":["coffee-order-controller"],"operationId":"updateOrderStatus","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrderStatusRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CoffeeOrderResponse"}}}}}}},"/api/ingredients/{id}":{"get":{"tags":["ingredient-controller"],"operationId":"getIngredientById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/IngredientResponseDto"}}}}}},"put":{"tags":["ingredient-controller"],"operationId":"updateIngredient","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngredientRequestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/IngredientResponseDto"}}}}}},"delete":{"tags":["ingredient-controller"],"operationId":"deleteIngredient","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/users":{"get":{"tags":["user-controller"],"operationId":"getAllUsers","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}},{"name":"sortBy","in":"query","required":false,"schema":{"type":"string","default":"createdAt"}},{"name":"sortDirection","in":"query","required":false,"schema":{"type":"string","default":"desc"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PagedResponseUserResponseDto"}}}}}},"post":{"tags":["user-controller"],"operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRequestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}}}},"/api/soap/orders":{"post":{"tags":["soap-order-proxy-controller"],"operationId":"createOrder","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/orders":{"get":{"tags":["coffee-order-controller"],"operationId":"getAllOrders","parameters":[{"name":"sort","in":"query","required":false,"schema":{"type":"string","default":"desc"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageCoffeeOrderResponse"}}}}}},"post":{"tags":["coffee-order-controller"],"operationId":"createOrder_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CoffeeOrderResponse"}}}}}}},"/api/messages":{"get":{"tags":["message-controller"],"operationId":"getAllMessages","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponseDto"}}}}}}},"post":{"tags":["message-controller"],"operationId":"createMessage","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageRequestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponseDto"}}}}}}},"/api/ingredients":{"get":{"tags":["ingredient-controller"],"operationId":"getAllIngredients","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/IngredientResponseDto"}}}}}}},"post":{"tags":["ingredient-controller"],"operationId":"createIngredient","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngredientRequestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/IngredientResponseDto"}}}}}}},"/api/grpc/orders/order":{"post":{"tags":["grpc-order-proxy-controller"],"operationId":"createOrder_2","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDto"}}}}}}},"/api/auth/register":{"post":{"tags":["auth-controller"],"operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}}}},"/api/auth/login":{"post":{"tags":["auth-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthFullResponse"}}}}}}},"/api/notifications/{id}/read":{"patch":{"tags":["notification-rest-controller"],"operationId":"markAsRead","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/notifications/read-all":{"patch":{"tags":["notification-rest-controller"],"operationId":"markAllAsRead","responses":{"200":{"description":"OK"}}}},"/api/users/export":{"get":{"tags":["user-controller"],"operationId":"exportUsersWithOrders","parameters":[{"name":"format","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"type":"string","format":"byte"}}}}}}}},"/api/users/all":{"get":{"tags":["user-controller"],"operationId":"getAllUsersNoPagination","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}}}}}}}},"/api/soap/orders/{orderId}":{"get":{"tags":["soap-order-proxy-controller"],"operationId":"getOrderById","parameters":[{"name":"orderId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/orders/pending":{"get":{"tags":["coffee-order-controller"],"operationId":"getPendingOrders","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}},{"name":"sort","in":"query","required":false,"schema":{"type":"string","default":"desc"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageCoffeeOrderResponse"}}}}}}},"/api/notifications":{"get":{"tags":["notification-rest-controller"],"operationId":"getUserNotifications","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageNotificationDto"}}}}}},"delete":{"tags":["notification-rest-controller"],"operationId":"deleteAll","responses":{"200":{"description":"OK"}}}},"/api/messages/{id}":{"get":{"tags":["message-controller"],"operationId":"getMessageById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MessageResponseDto"}}}}}},"delete":{"tags":["message-controller"],"operationId":"deleteMessage","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/messages/sender/{senderId}":{"get":{"tags":["message-controller"],"operationId":"getMessagesBySender","parameters":[{"name":"senderId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponseDto"}}}}}}}},"/api/messages/receiver/{receiverId}":{"get":{"tags":["message-controller"],"operationId":"getMessagesByReceiver","parameters":[{"name":"receiverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponseDto"}}}}}}}},"/api/messages/dialog/{senderId}/{receiverId}":{"get":{"tags":["message-controller"],"operationId":"getDialog","parameters":[{"name":"senderId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"receiverId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponseDto"}}}}}}}},"/api/kafka/orders":{"get":{"tags":["order-event-listener"],"operationId":"getRecentOrders","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderCreatedEvent"}}}}}}}},"/api/ingredients/available":{"get":{"tags":["ingredient-controller"],"operationId":"getAvailableIngredients","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/IngredientResponseDto"}}}}}}}},"/api/grpc/orders/{userId}":{"get":{"tags":["grpc-order-proxy-controller"],"operationId":"getOrdersByUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderDto"}}}}}}}},"/api/grpc/orders/order/{orderId}":{"get":{"tags":["grpc-order-proxy-controller"],"operationId":"getOrderById_2","parameters":[{"name":"orderId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDto"}}}}}}}},"components":{"schemas":{"UserRequestDto":{"required":["email","password","role","username"],"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"role":{"type":"string"}}},"UserResponseDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}},"CoffeeOrder":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"user":{"$ref":"#/components/schemas/User"},"ingredients":{"type":"array","items":{"$ref":"#/components/schemas/Ingredient"}},"createdAt":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["CREATED","INPROGRESS","DONE"]},"comment":{"type":"string"}}},"Ingredient":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"quantity":{"type":"integer","format":"int32"}}},"User":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"role":{"type":"string","enum":["CUSTOMER","SELLER","ADMIN"]},"createdAt":{"type":"string","format":"date-time"}}},"UpdateOrderStatusRequest":{"type":"object","properties":{"status":{"type":"string"}}},"CoffeeOrderResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"user":{"$ref":"#/components/schemas/UserDto"},"ingredients":{"type":"array","items":{"$ref":"#/components/schemas/IngredientDto"}},"createdAt":{"type":"string","format":"date-time"},"status":{"type":"string"},"comment":{"type":"string"}}},"IngredientDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"quantity":{"type":"integer","format":"int32"}}},"UserDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"}}},"IngredientRequestDto":{"required":["name","quantity"],"type":"object","properties":{"name":{"type":"string"},"quantity":{"type":"integer","format":"int32"}}},"IngredientResponseDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"quantity":{"type":"integer","format":"int32"}}},"CreateOrderDto":{"type":"object","properties":{"ingredientIds":{"type":"array","items":{"type":"integer","format":"int64"}},"comment":{"type":"string"}}},"MessageRequestDto":{"required":["content","receiverId","senderId"],"type":"object","properties":{"senderId":{"type":"integer","format":"int64"},"receiverId":{"type":"integer","format":"int64"},"content":{"type":"string"}}},"MessageResponseDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"content":{"type":"string"},"sentAt":{"type":"string","format":"date-time"},"sender":{"$ref":"#/components/schemas/UserDto"},"receiver":{"$ref":"#/components/schemas/UserDto"}}},"OrderDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"ingredientIds":{"type":"array","items":{"type":"integer","format":"int64"}},"createdAt":{"type":"string"},"status":{"type":"string"}}},"RegisterRequest":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}},"AuthRequest":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"AuthFullResponse":{"type":"object","properties":{"token":{"type":"string"},"user":{"$ref":"#/components/schemas/UserResponseDto"}}},"PagedResponseUserResponseDto":{"type":"object","properties":{"content":{"type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}},"page":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"totalPages":{"type":"integer","format":"int32"},"first":{"type":"boolean"},"last":{"type":"boolean"},"hasNext":{"type":"boolean"},"hasPrevious":{"type":"boolean"}}},"PageCoffeeOrderResponse":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"last":{"type":"boolean"},"first":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/CoffeeOrderResponse"}},"number":{"type":"integer","format":"int32"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"unpaged":{"type":"boolean"},"paged":{"type":"boolean"},"offset":{"type":"integer","format":"int64"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}}}},"SortObject":{"type":"object","properties":{"direction":{"type":"string"},"nullHandling":{"type":"string"},"ascending":{"type":"boolean"},"property":{"type":"string"},"ignoreCase":{"type":"boolean"}}},"NotificationDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"message":{"type":"string"},"type":{"type":"string"},"orderId":{"type":"integer","format":"int64"},"status":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}},"PageNotificationDto":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"last":{"type":"boolean"},"first":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/NotificationDto"}},"number":{"type":"integer","format":"int32"},"sort":{"type":"array","items":{"$ref":"#/components/schemas/SortObject"}},"empty":{"type":"boolean"}}},"OrderCreatedEvent":{"type":"object","properties":{"orderId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"ingredientIds":{"type":"array","items":{"type":"integer","format":"int64"}},"status":{"type":"string"},"createdAt":{"type":"string","format":"date-time"}}}},"securitySchemes":{"Bearer Authentication":{"type":"http","description":"JWT токен для авторизации. Формат: '{token}'","scheme":"bearer","bearerFormat":"JWT"}}}}